# app/services/ia_service.py
import os
from dotenv import load_dotenv
import google.generativeai as genai

load_dotenv()

# Configura chave da API do Gemini
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))

async def gerar_codigo_ia(prompt: str) -> str:
    system_prompt = (
        "Você é um especialista em gerar código HTML, Tailwind, React e JavaScript. "
        "Gere somente código, sem explicações."
    )

    model = genai.GenerativeModel(model_name="chat-bison-001")  # modelo válido
    response = await model.generate_content(                    # await aqui
        [system_prompt, prompt],
        generation_config={
            "temperature": 0.7,
            "max_output_tokens": 1000,
        }
    )
    return response.text
